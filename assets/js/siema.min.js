/* Siema v1.5.1 | MIT License | https://pawelgrzybek.com/siema/ */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),Siema=function(){function t(e){var i=this;_classCallCheck(this,t),this.config=Object.assign({selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,onInit:function(){},onChange:function(){}},e),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,this.selectorWidth=this.selector.clientWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.startIndex,this.transformProperty=""!=>("string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"),this.init(),['resizeHandler','touchstartHandler','touchendHandler','touchmoveHandler','mousedownHandler','mouseupHandler','mouseleaveHandler','mousemoveHandler'].forEach(function(t){i[t]=i[t].bind(i)})}
return _createClass(t,[{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler))}},{key:"detachEvents",value:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler)}},{key:"init",value:function(){this.attachEvents(),this.resolveSlidesNumber(),this.selector.style.overflow="hidden",this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=this.selectorWidth/this.perPage*this.innerElements.length+"px",this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.webkitTransform="translate3d("+(-this.selectorWidth*this.currentSlide)+"px, 0, 0)",this.sliderFrame.style.transform="translate3d("+(-this.selectorWidth*this.currentSlide)+"px, 0, 0)",this.innerElements.forEach(function(t){t.style.cssFloat="left",t.style.float="left",t.style.width=100/i.perPage+"%",i.sliderFrame.appendChild(t)}),this.selector.appendChild(this.sliderFrame),this.config.onInit.call(this)}},{key:"resolveSlidesNumber",value:function(){"number"==typeof this.config.perPage?this.perPage=this.config.perPage:"object"==typeof this.config.perPage&&(this.perPage=1,Object.keys(this.config.perPage).forEach(function(t){window.innerWidth>=t&&(this.perPage=this.config.perPage[t])}.bind(this)))}},{key:"prev",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(!(this.innerElements.length<=this.perPage)){var e=this.currentSlide;this.currentSlide=0===this.currentSlide&&this.config.loop?this.innerElements.length-this.perPage:this.currentSlide-Math.min(t,this.currentSlide),e!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this))}}},{key:"next",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(!(this.innerElements.length<=this.perPage)){var e=this.currentSlide;this.currentSlide=this.currentSlide+Math.min(t,this.innerElements.length-this.perPage-this.currentSlide),this.currentSlide===e&&this.config.loop&&(this.currentSlide=0),e!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this))}}},{key:"disableDraggable",value:function(){this.detachEvents(),this.config.draggable=!1,this.attachEvents()}},{key:"enableDraggable",value:function(){this.detachEvents(),this.config.draggable=!0,this.attachEvents()}},{key:"goTo",value:function(t){if(!(this.innerElements.length<=this.perPage)){var e=this.currentSlide;this.currentSlide=Math.min(Math.max(t,0),this.innerElements.length-this.perPage),e!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this))}}},{key:"slideToCurrent",value:function(){this.sliderFrame.style.webkitTransform="translate3d("+(-this.selectorWidth*this.currentSlide)+"px, 0, 0)",this.sliderFrame.style.transform="translate3d("+(-this.selectorWidth*this.currentSlide)+"px, 0, 0)"}},{key:"updateAfterDrag",value:function(){this.drag.endX=this.drag.endX||this.drag.startX,this.drag.endY=this.drag.endY||this.drag.startY;var t=this.drag.endX-this.drag.startX,e=this.drag.endY-this.drag.startY,i=0===this.drag.letItGo||Math.abs(t)<this.config.threshold||Math.abs(t)<=Math.abs(e);i?this.slideToCurrent():t>0?this.prev():this.next(),this.selector.classList.remove("isDragging")}}, {key:"resizeHandler",value:function(){this.resolveSlidesNumber(),this.selectorWidth=this.selector.clientWidth,this.sliderFrame.style.width=this.selectorWidth/this.perPage*this.innerElements.length+"px",this.slideToCurrent()}},{key:"clearDrag",value:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null}}},{key:"touchstartHandler",value:function(t){t.stopPropagation(),this.pointerDown=!0,this.drag.startX=t.touches[0].pageX,this.drag.startY=t.touches[0].pageY}},{key:"touchendHandler",value:function(t){t.stopPropagation(),this.pointerDown=!1,this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing, this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"touchmoveHandler",value:function(t){t.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-t.touches[0].pageY)<Math.abs(this.drag.startX-t.touches[0].pageX)),this.pointerDown&&this.drag.letItGo&&(t.preventDefault(),this.drag.endX=t.touches[0].pageX,this.drag.endY=t.touches[0].pageY,this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing,this.sliderFrame.style.webkitTransform="translate3d("+(-this.currentSlide*this.selectorWidth+(this.drag.startX-this.drag.endX))+"px, 0, 0)",this.sliderFrame.style.transform="translate3d("+(-this.currentSlide*this.selectorWidth+(this.drag.startX-this.drag.endX))+"px, 0, 0)")}}, {key:"mousedownHandler",value:function(t){t.preventDefault(),this.pointerDown=!0,this.drag.startX=t.pageX,this.drag.startY=t.pageY}},{key:"mouseupHandler",value:function(t){t.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing,this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"mousemoveHandler",value:function(t){t.preventDefault(),this.pointerDown&&(this.drag.endX=t.pageX,this.drag.endY=t.pageY,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing,this.sliderFrame.style.webkitTransform="translate3d("+(-this.currentSlide*this.selectorWidth+(this.drag.startX-this.drag.endX))+"px, 0, 0)",this.sliderFrame.style.transform="translate3d("+(-this.currentSlide*this.selectorWidth+(this.drag.startX-this.drag.endX))+"px, 0, 0)")}, {key:"mouseleaveHandler",value:function(t){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=t.pageX,this.drag.endY=t.pageY,this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing,this.updateAfterDrag(),this.clearDrag())}}]),t}();
